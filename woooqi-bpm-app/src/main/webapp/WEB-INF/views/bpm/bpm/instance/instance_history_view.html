<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>HistoryEdit</title>
	    <style type="text/css"></style>
        <script type="text/javascript">
        var win_width = $(window).width();
	    var win_height = $(window).height();
        $(document).ready(function() {
        	$("#tabContent").css("min-height",win_height*0.8);
        	$("#image").css("min-height",win_height*0.8);
        	$("#histable").css("min-height",win_height*0.8-15);
        	
    	});
        
        function indexFormatter(value, row, index) {  
            return index+1;  
	    }
  
       
        function sjFormatter(value,row,index){
     		if(value){
     			return new Date(value).Format("yyyy-MM-dd hh:mm");
     		}else{
     			return "";
     		}
    	}
        	
        function queryParams(params) {   //设置查询参数  
        	var param = {    
                pageNumber : params.pageNumber,    
                pageSize : params.pageSize,  
                processInstanceId :'${id}',
            };
            return param;                   
        }
        function search(){
	    	$('#data-table').bootstrapTable('refresh', {});  
	    }
        </script>
	</head>
	<body>
		<div id="wrapper">
				<div class="row">
					<div class="col-xs-12 ">
						<div class="panel-body">
						
						 	<ul class="nav nav-tabs">
		                   		 <li class="active"><a href="#tab1" data-toggle="tab">流程图</a></li>
		                  		 <li><a href="#tab2" data-toggle="tab">具体流程</a></li>
		              	  	</ul>
		              	  	
		              	  	<div  id="tabContent"  class="tab-content" >
			                	<div class="tab-pane fade in active" id="tab1">
				                	<div class="row" >
										<div class="col-xs-12">
											<div id="image" class="panel-body pre-scrollable" >
											<img src="${ctx}/historyInstance/getInstanceImage?id=${id}"/>
											</div>
										</div>
									</div>
			                	</div>
			                	
			                	<div class="tab-pane fade " id="tab2">
			                		<div class="col-xs-12">
											<div id="histable" class="panel panel-default pre-scrollable">
												<div class="panel-body "  >
												 	<table width="100%" class="table table-striped table-bordered table-hover"  id="data-table" 
																data-toggle="table"  data-click-to-Select=true 
																data-url="${ctx}/historyInstance/getHistoricTaskinst" data-method="post" data-content-type="application/x-www-form-urlencoded"
																data-query-params="queryParams" data-query-params-type="undefined" 
																data-pagination=true data-side-pagination="server" data-page-size=20 >
														<thead>
															<tr>
																<!-- <th data-field="index" class="text-center" data-formatter="indexFormatter" data-width="50px">序号</th>
																<th data-field="processInstanceId" class="text-center">流程实例编号</th>
																<th data-field="name" class="text-center">任务名称</th>
																<th data-field="assignee" class="text-center">办理人</th>
																<th data-field="startTime" class="text-center" data-formatter="sjFormatter">流程开始时间</th>
																<th data-field="endTime" class="text-center" data-formatter="sjFormatter">流程结束时间</th> -->
																
																<th data-field="index" class="text-center" data-formatter="indexFormatter" data-width="50px">序号</th>
																<th data-field="PROC_INST_ID_" class="text-center hidden">流程实例编号</th>
																<th data-field="NAME_" class="text-center">任务名称</th>
																<th data-field="ASSIGNEE_NAME" class="text-center">办理人</th>
																<th data-field="START_TIME_" class="text-center" data-formatter="sjFormatter">流程开始时间</th>
																<th data-field="END_TIME_" class="text-center" data-formatter="sjFormatter">流程结束时间</th>
										
															</tr>
														</thead>
													</table>
												 	
												</div>	
											</div>
										</div>
			                	</div>
			                	
			                </div>
						
						</div>
						
					</div>
				</div>
				
				
				
			</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-default" onclick="parent.d.close();">取消</button>
		</div>
	</body>
</html>